@model MyPlacesViewModel

<head>
    <script src="https://api.mqcdn.com/sdk/mapquest-js/v1.3.2/mapquest.js"></script>
    <link type="text/css" rel="stylesheet" href="https://api.mqcdn.com/sdk/mapquest-js/v1.3.2/mapquest.css"/>

    <script type="text/javascript">
      window.onload = function() {
        L.mapquest.key = '@ViewData["ApiKey"]';

        var map = L.mapquest.map('map', {
          center: [@Model.Places[Model.Places.Length-1].LatLong],
          layers: L.mapquest.tileLayer('map'),
          zoom: 12
        });

        @foreach (var marker in Model.Places)
        {
          @if(!String.IsNullOrEmpty(marker.LatLong))
          {
            <Text>
            L.marker([@marker.LatLong], {
            icon: L.mapquest.icons.flag({
            primaryColor: '#22407F',
            secondaryColor: '#3B5998',
            symbol: "@marker.Name.Substring(0,4)"
            }),
            draggable: false
            }).bindPopup("@marker.Name"+"<br>"+"@marker.Category.ToString()").addTo(map);
            </Text>
          }
        }

        map.addControl(L.mapquest.control());
      }
    </script>
  </head>
  <h2>Your added places</h2>
<ul>
    @foreach (var item in Model.Places)
    {
        <li>@item.Name - @item.Address - @item.Category</li>    
    }
</ul>
<a href="MyPlaces/AddNewPlaces">Add a new place!</a>
<div id="map" style="width: 100%; height: 530px;"></div>
